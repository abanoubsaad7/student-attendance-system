<!DOCTYPE html>
<html lang="en">
  <%- include('partials/head') %>
<body>
  <div class="container">
    <input type="text" id="filterInput" placeholder="Filter by name">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">First Name</th>
          <th scope="col">Last Name</th>
          <th scope="col">code</th>
          <th scope="col">level</th>
          <th scope="col">add exam</th>
        </tr>
      </thead>
      <tbody>
        <% arrstudent.forEach((item)=> { %>
          <tr>
            <td>
              <%= item.fname %>
            </td>
            <td>
              <%= item.lname %>
            </td>
            <td>
              <%= item.code %>
            </td>
            <td>
              <%= item.level %>
            </td>
            <td>
              <a href="/all-studentlist-for-exam/<%= item._id %>" class="btn btn-primary" >add exam for this student</a>
            </td>
          </tr>
          <% }); %>
      </tbody>
    </table>
  </div>
  <div class="container">
    <a href="main-exam" class="btn btn-lg btn-dark">Back</a>
  </div>
  <script>
    const filterInput = document.getElementById('filterInput');
    const tableRows = document.querySelectorAll('tbody tr');

    filterInput.addEventListener('input', () => {
      const filterValue = filterInput.value.toLowerCase();
      tableRows.forEach((row) => {
        const firstName = row.cells[0].textContent.toLowerCase();
        const lastName = row.cells[1].textContent.toLowerCase();

        if (firstName.includes(filterValue) || lastName.includes(filterValue)) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>